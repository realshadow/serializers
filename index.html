<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Serializers by realshadow</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Serializers</h1>
      <h2 class="project-tagline">PHP collection of serializers for JSON, JSONP, XML, YAML, INI</h2>
      <a href="https://github.com/realshadow/serializers" class="btn">View on GitHub</a>
      <a href="https://github.com/realshadow/serializers/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/realshadow/serializers/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="php-collection-of-serializers-for-json-jsonp-xml-yaml-ini" class="anchor" href="#php-collection-of-serializers-for-json-jsonp-xml-yaml-ini" aria-hidden="true"><span class="octicon octicon-link"></span></a>PHP collection of serializers for JSON, JSONP, XML, YAML, INI</h1>

<p>Written for PHP 5.3 to solve a specific issue - <strong>singularization/pluralization</strong> of elements when transforming them from and to arrays. The difference between serializers was obvious when we passed XML files between PHP, Python and .NET. Later, more serializers were added to get a complete package.</p>

<p>The goal was to automatically perform singularization of arrays when serializing to XML. E.g.</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c1">array</span>(</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>products<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">array</span>(</span>
<span class="pl-s1">        <span class="pl-c1">array</span>(</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>brand<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>Samsung<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>model<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>Galaxy<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>price<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">999</span></span>
<span class="pl-s1">        ),</span>
<span class="pl-s1">        <span class="pl-c1">array</span>(</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>brand<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>HTC<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>model<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>One<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>price<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">null</span></span>
<span class="pl-s1">        )</span>
<span class="pl-s1">    )</span>
<span class="pl-s1">);</span></pre></div>

<p>Which, when serialized, would become</p>

<div class="highlight highlight-text-xml"><pre> &lt;<span class="pl-ent">products</span>&gt;
  &lt;<span class="pl-ent">product</span>&gt;
   &lt;<span class="pl-ent">brand</span>&gt;Samsung&lt;/<span class="pl-ent">brand</span>&gt;
   &lt;<span class="pl-ent">model</span>&gt;Galaxy&lt;/<span class="pl-ent">model</span>&gt;
   &lt;<span class="pl-ent">price</span>&gt;999&lt;/<span class="pl-ent">price</span>&gt;
  &lt;/<span class="pl-ent">product</span>&gt;
  &lt;<span class="pl-ent">product</span>&gt;
   &lt;<span class="pl-ent">brand</span>&gt;HTC&lt;/<span class="pl-ent">brand</span>&gt;
   &lt;<span class="pl-ent">model</span>&gt;One&lt;/<span class="pl-ent">model</span>&gt;
   &lt;<span class="pl-ent">price</span> <span class="pl-e">xsi</span><span class="pl-e">:</span><span class="pl-e">nil</span>=<span class="pl-s"><span class="pl-pds">"</span>true<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">price</span>&gt;
  &lt;/<span class="pl-ent">product</span>&gt;
 &lt;/<span class="pl-ent">products</span>&gt;</pre></div>

<p>instead of (this is the default behaviour)</p>

<div class="highlight highlight-text-xml"><pre> &lt;<span class="pl-ent">products</span>&gt;
   &lt;<span class="pl-ent">brand</span>&gt;Samsung&lt;/<span class="pl-ent">brand</span>&gt;
   &lt;<span class="pl-ent">model</span>&gt;Galaxy&lt;/<span class="pl-ent">model</span>&gt;
   &lt;<span class="pl-ent">price</span>&gt;999&lt;/<span class="pl-ent">price</span>&gt;
 &lt;/<span class="pl-ent">products</span>&gt;
 &lt;<span class="pl-ent">products</span>&gt;
   &lt;<span class="pl-ent">brand</span>&gt;HTC&lt;/<span class="pl-ent">brand</span>&gt;
   &lt;<span class="pl-ent">model</span>&gt;One&lt;/<span class="pl-ent">model</span>&gt;
   &lt;<span class="pl-ent">price</span> <span class="pl-e">xsi</span><span class="pl-e">:</span><span class="pl-e">nil</span>=<span class="pl-s"><span class="pl-pds">"</span>true<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">price</span>&gt;
 &lt;/<span class="pl-ent">products</span>&gt;</pre></div>

<p>Same rule applies to deserialization which, by using different serializers, would turn into into different arrays. By applying singularization the other way around, it is possible to <strong>get back the same array</strong> as was used for serialization.</p>

<h3>
<a id="xml-serialization" class="anchor" href="#xml-serialization" aria-hidden="true"><span class="octicon octicon-link"></span></a>XML Serialization</h3>

<p>Support for</p>

<ul>
<li>attributes, namespaces, cdata and comments</li>
<li>singularization of words - products =&gt; product</li>
<li>option to automatically add xsi:nil=true to null elements</li>
<li>event for manipulation of nodes</li>
</ul>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$array</span> <span class="pl-k">=</span> <span class="pl-c1">array</span>(</span>
<span class="pl-s1">    <span class="pl-c1">Serializers\Encoders\</span><span class="pl-c1">Xml</span><span class="pl-k">::</span><span class="pl-c1">ATTRIBUTES</span> <span class="pl-k">=&gt;</span> <span class="pl-c1">array</span>(</span>
<span class="pl-s1">        <span class="pl-s"><span class="pl-pds">'</span>xmlns<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>http://cfh.sk/izmluvnik/xsell<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">        <span class="pl-c1">Serializers\Encoders\</span><span class="pl-c1">Xml</span><span class="pl-k">::</span><span class="pl-c1">NS</span> <span class="pl-k">=&gt;</span> <span class="pl-c1">array</span>(</span>
<span class="pl-s1">            <span class="pl-c1">array</span>(</span>
<span class="pl-s1">                <span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>xmlns:xsi<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">                <span class="pl-s"><span class="pl-pds">'</span>content<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>http://www.w3.org/2001/XMLSchema-instance<span class="pl-pds">'</span></span></span>
<span class="pl-s1">            ),</span>
<span class="pl-s1">            <span class="pl-c1">array</span>(</span>
<span class="pl-s1">                <span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>xmlns:xsd<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">                <span class="pl-s"><span class="pl-pds">'</span>content<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>http://www.w3.org/2001/XMLSchema<span class="pl-pds">'</span></span></span>
<span class="pl-s1">            )</span>
<span class="pl-s1">        )</span>
<span class="pl-s1">    ),</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>products<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">array</span>(</span>
<span class="pl-s1">        <span class="pl-c1">array</span>(</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>brand<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>Samsung<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>model<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>Galaxy<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>price<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">999</span></span>
<span class="pl-s1">        ),</span>
<span class="pl-s1">        <span class="pl-c1">array</span>(</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>brand<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>HTC<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>model<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>One<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>price<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">null</span></span>
<span class="pl-s1">        )</span>
<span class="pl-s1">    )</span>
<span class="pl-s1">);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$xml</span> <span class="pl-k">=</span> <span class="pl-c1">Serializers\</span><span class="pl-c1">Encode</span><span class="pl-k">::</span>toXml(<span class="pl-s"><span class="pl-pds">'</span>root<span class="pl-pds">'</span></span>, <span class="pl-smi">$array</span>, <span class="pl-c1">array</span>(</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>singularize_words<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">true</span>,</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>nil_on_null<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">true</span></span>
<span class="pl-s1">));</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c1">print</span> <span class="pl-smi">$xml</span><span class="pl-k">-&gt;</span>withHeaders();</span></pre></div>

<p>Which outputs</p>

<div class="highlight highlight-text-xml"><pre>&lt;?<span class="pl-ent">xml</span><span class="pl-e"> version</span>=<span class="pl-s"><span class="pl-pds">"</span>1.0<span class="pl-pds">"</span></span><span class="pl-e"> encoding</span>=<span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>?&gt;
&lt;<span class="pl-ent">root</span> <span class="pl-e">xmlns</span>=<span class="pl-s"><span class="pl-pds">"</span>http://cfh.sk/izmluvnik/xsell<span class="pl-pds">"</span></span> <span class="pl-e">xmlns</span><span class="pl-e">:</span><span class="pl-e">xsi</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="pl-pds">"</span></span> <span class="pl-e">xmlns</span><span class="pl-e">:</span><span class="pl-e">xsd</span>=<span class="pl-s"><span class="pl-pds">"</span>http://www.w3.org/2001/XMLSchema<span class="pl-pds">"</span></span>&gt;
 &lt;<span class="pl-ent">products</span>&gt;
  &lt;<span class="pl-ent">product</span>&gt;
   &lt;<span class="pl-ent">brand</span>&gt;Samsung&lt;/<span class="pl-ent">brand</span>&gt;
   &lt;<span class="pl-ent">model</span>&gt;Galaxy&lt;/<span class="pl-ent">model</span>&gt;
   &lt;<span class="pl-ent">price</span>&gt;999&lt;/<span class="pl-ent">price</span>&gt;
  &lt;/<span class="pl-ent">product</span>&gt;
  &lt;<span class="pl-ent">product</span>&gt;
   &lt;<span class="pl-ent">brand</span>&gt;HTC&lt;/<span class="pl-ent">brand</span>&gt;
   &lt;<span class="pl-ent">model</span>&gt;One&lt;/<span class="pl-ent">model</span>&gt;
   &lt;<span class="pl-ent">price</span> <span class="pl-e">xsi</span><span class="pl-e">:</span><span class="pl-e">nil</span>=<span class="pl-s"><span class="pl-pds">"</span>true<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">price</span>&gt;
  &lt;/<span class="pl-ent">product</span>&gt;
 &lt;/<span class="pl-ent">products</span>&gt;
&lt;/<span class="pl-ent">root</span>&gt;</pre></div>

<h3>
<a id="xml-deserialization" class="anchor" href="#xml-deserialization" aria-hidden="true"><span class="octicon octicon-link"></span></a>XML Deserialization</h3>

<p>By default every comment, attribute, namespace will be stripped from the result as well as
the root element. Every option can be turned off/on in config</p>

<p>Deserialization is done by SimpleXML coupled with json_encode (in this case provided JSON decoder) with one
simple addition - SimpleXML object will be transformed before being encoded with json_encode (backport of
JSONSerialize interface)</p>

<p>Comments are parsed separately via DOMXpath (since SimpleXML can not handle them) and are
added to a separate array with indexes poiting to their original location, with that, it should
be easy to merge comments with the main result and receive the original array.</p>

<p>By default, transforming elements from their singular counterpart back to plural and thus
flattening the whole array is turned off and must be turned on. Its possible to both - include
new mappings for words and to exclude specific words. This works exactly as in provided XML
encoder.</p>

<p>The whole goal of flattening is to get back <strong>exactly</strong> the same array as the one that was used
to create provided XML.</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c">// using the same XML that we got in serialization</span></span>
<span class="pl-s1"><span class="pl-smi">$output</span> <span class="pl-k">=</span> <span class="pl-c1">Serializers\</span><span class="pl-c1">Decode</span><span class="pl-k">::</span>xml(<span class="pl-smi">$xml</span><span class="pl-k">-&gt;</span>load(), <span class="pl-c1">array</span>(<span class="pl-s"><span class="pl-pds">'</span>singularize_words<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">true</span>));</span></pre></div>

<p>Which outputs <strong>exactly the same array</strong> as was used in the example before</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c1">print_r</span>(<span class="pl-smi">$output</span><span class="pl-k">-&gt;</span>toArray());</span></pre></div>

<h3>
<a id="json-deserialization" class="anchor" href="#json-deserialization" aria-hidden="true"><span class="octicon octicon-link"></span></a>JSON Deserialization</h3>

<p>Support for:</p>

<ul>
<li> automatic parsing of Microsoft's JSON date format (e.g. <code>/Date(1425556377427+0100)/</code>)</li>
<li> backport of <code>JSON_BIGINT_AS_STRING</code> available from PHP 5.4.0</li>
<li> isValid method for checking validity of provided JSON string</li>
<li> possible conversion from JSON to:

<ul>
<li>PHP types (string, array, object)</li>
<li>XML, YAML, INI</li>
</ul>
</li>
</ul>

<p>With overriding configuration one can change the default timeformat and timezone settings form MS date conversion, or turn it off completely.</p>

<p>It's possible to register an event callback to be called during escaping of BIGINT, in case said escaping is not good enough, or to turning it off completely.</p>

<p>Callback method must accept one parameter and thats registered JSON string. Callback can be a closure or anything else that will pass as callable.</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$json</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&lt;&lt;&lt;</span><span class="pl-k">EOT</span></span></span>
<span class="pl-s1"><span class="pl-s">    {</span></span>
<span class="pl-s1"><span class="pl-s">        "foo" : "bar",</span></span>
<span class="pl-s1"><span class="pl-s">        "small" : "123456",</span></span>
<span class="pl-s1"><span class="pl-s">        "large" : 200000000000009093302,</span></span>
<span class="pl-s1"><span class="pl-s">        "text" : "Example ratio 1000000000000000:1",</span></span>
<span class="pl-s1"><span class="pl-s">        "date" : "/Date(1425556377427+0100)/"</span></span>
<span class="pl-s1"><span class="pl-s">    }</span></span>
<span class="pl-s1"><span class="pl-s"><span class="pl-k">EOT</span></span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$s</span> <span class="pl-k">=</span> <span class="pl-c1">Serializers\</span><span class="pl-c1">Decode</span><span class="pl-k">::</span>json(<span class="pl-smi">$json</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c1">print_r</span>(<span class="pl-smi">$s</span><span class="pl-k">-&gt;</span>toObject());</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// transform said json to xml and output it</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c1">print</span> <span class="pl-c1">Serializers\</span><span class="pl-c1">Decode</span><span class="pl-k">::</span>json(<span class="pl-smi">$json</span>)<span class="pl-k">-&gt;</span>toXml(<span class="pl-s"><span class="pl-pds">'</span>root<span class="pl-pds">'</span></span>)<span class="pl-k">-&gt;</span>withHeaders();</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// events</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$json</span> <span class="pl-k">=</span> <span class="pl-c1">Serializers\</span><span class="pl-c1">Decode</span><span class="pl-k">::</span>json(<span class="pl-smi">$json</span>)<span class="pl-k">-&gt;</span>on(<span class="pl-c1">Serializers\</span><span class="pl-c1">Events</span><span class="pl-k">::</span><span class="pl-c1">JSON_MSDATE_MATCH</span>, <span class="pl-k">function</span>(<span class="pl-smi">$date</span>) {</span>
<span class="pl-s1">    <span class="pl-c">// matches returned from preg_replace_callback</span></span>
<span class="pl-s1">    <span class="pl-c1">list</span>(, <span class="pl-smi">$timestamp</span>,,) <span class="pl-k">=</span> <span class="pl-smi">$date</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">return</span> <span class="pl-c1">date</span>(<span class="pl-s"><span class="pl-pds">'</span>Y-m-d H:i:s<span class="pl-pds">'</span></span>, <span class="pl-smi">$timestamp</span>);</span>
<span class="pl-s1">});</span></pre></div>

<h3>
<a id="json-serialization" class="anchor" href="#json-serialization" aria-hidden="true"><span class="octicon octicon-link"></span></a>JSON Serialization</h3>

<p>It is possible to register JSON_SERIALIZE event that works exactly like PHP 5.4 <code>JsonSerializable</code> interface and thus allows modifying the object before it is converted to JSON.</p>

<p>JSON Serializer also includes a method for creating dates in Microsoft JSON date format, e.g <code>/Date(1425556377427+0100)/</code></p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$json</span> <span class="pl-k">=</span> <span class="pl-c1">Serializers\</span><span class="pl-c1">Encode</span><span class="pl-k">::</span>toJson(<span class="pl-c1">array</span>(</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>bar<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>foodate<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">date</span>(<span class="pl-s"><span class="pl-pds">'</span>d.m.Y H:i:s<span class="pl-pds">'</span></span>)</span>
<span class="pl-s1">))<span class="pl-k">-&gt;</span>onSerialize(<span class="pl-k">function</span>(<span class="pl-smi">$data</span>) {</span>
<span class="pl-s1">    <span class="pl-smi">$data</span>[<span class="pl-s"><span class="pl-pds">'</span>foodate<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> <span class="pl-c1">Serializers\Encoders\</span><span class="pl-c1">Json</span><span class="pl-k">::</span>toMSDate(<span class="pl-smi">$data</span>[<span class="pl-s"><span class="pl-pds">'</span>foodate<span class="pl-pds">'</span></span>]);</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">return</span> <span class="pl-smi">$data</span>;</span>
<span class="pl-s1">});</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c1">print</span> <span class="pl-smi">$json</span><span class="pl-k">-&gt;</span>withHeaders();</span></pre></div>

<h3>
<a id="jsonp-serialization" class="anchor" href="#jsonp-serialization" aria-hidden="true"><span class="octicon octicon-link"></span></a>JSONP Serialization</h3>

<p>Class for easy JSONP serialization, behaves like JSON serializer with additional checks for callback function name validation, which can be changed with custom event</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$jsonp</span> <span class="pl-k">=</span> <span class="pl-c1">Serializers\</span><span class="pl-c1">Encode</span><span class="pl-k">::</span>toJsonp(<span class="pl-s"><span class="pl-pds">'</span>_foo.bar<span class="pl-pds">'</span></span>, <span class="pl-c1">array</span>(</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>bar<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>bar<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span></span>
<span class="pl-s1">));</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$jsonp</span><span class="pl-k">-&gt;</span>allowCors(<span class="pl-s"><span class="pl-pds">'</span>*<span class="pl-pds">'</span></span>, <span class="pl-c1">array</span>(<span class="pl-s"><span class="pl-pds">'</span>GET<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>POST<span class="pl-pds">'</span></span>));</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c1">print</span> <span class="pl-smi">$jsonp</span><span class="pl-k">-&gt;</span>withHeaders();</span></pre></div>

<h3>
<a id="jsonp-deserialization" class="anchor" href="#jsonp-deserialization" aria-hidden="true"><span class="octicon octicon-link"></span></a>JSONP Deserialization</h3>

<p>Class for easy JSONP deserialization, behaves like JSON deserializer</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$json</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>_foo.bar({"foo":"bar","bar":"foo"})<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$data</span> <span class="pl-k">=</span> <span class="pl-c1">Serializers\</span><span class="pl-c1">Decode</span><span class="pl-k">::</span>jsonp(<span class="pl-smi">$json</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c1">print_r</span>(<span class="pl-smi">$data</span><span class="pl-k">-&gt;</span>toObject());</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// transform said json to xml with callback name as root element and output it</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c1">print</span> <span class="pl-c1">Serializers\</span><span class="pl-c1">Decode</span><span class="pl-k">::</span>jsonp(<span class="pl-smi">$json</span>)<span class="pl-k">-&gt;</span>toXml()<span class="pl-k">-&gt;</span>withHeaders();</span></pre></div>

<h3>
<a id="yaml-serializer" class="anchor" href="#yaml-serializer" aria-hidden="true"><span class="octicon octicon-link"></span></a>YAML Serializer</h3>

<p>Uses Symfony's YAML component under the hood</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$yaml</span> <span class="pl-k">=</span> <span class="pl-c1">\Serializers\</span><span class="pl-c1">Encode</span><span class="pl-k">::</span>toYaml(<span class="pl-smi">$array</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c1">print_r</span>(<span class="pl-smi">$yaml</span><span class="pl-k">-&gt;</span>load());</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// or</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$yaml</span><span class="pl-k">-&gt;</span>toFile(<span class="pl-s"><span class="pl-pds">'</span>config.yml<span class="pl-pds">'</span></span>);</span></pre></div>

<h3>
<a id="yaml-deserializer" class="anchor" href="#yaml-deserializer" aria-hidden="true"><span class="octicon octicon-link"></span></a>YAML Deserializer</h3>

<p>Uses Symfony's YAML component under the hood.</p>

<p>Transformation to <code>XML</code>, <code>JSON</code>, etc. is possible, but is subjected to the possibilities of the YAML converter.</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$yaml</span> <span class="pl-k">=</span> <span class="pl-c1">Serializers\</span><span class="pl-c1">Decode</span><span class="pl-k">::</span>yaml(<span class="pl-c1">file_get_contents</span>(<span class="pl-s"><span class="pl-pds">'</span>config.yml<span class="pl-pds">'</span></span>));</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c1">print_r</span>(<span class="pl-smi">$yaml</span><span class="pl-k">-&gt;</span>toObject());</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c">// transform said json to xml and output it</span></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c1">print</span> <span class="pl-c1">Serializers\</span><span class="pl-c1">Decode</span><span class="pl-k">::</span>yaml(<span class="pl-c1">file_get_contents</span>(<span class="pl-s"><span class="pl-pds">'</span>config.yml<span class="pl-pds">'</span></span>))<span class="pl-k">-&gt;</span>toXml(<span class="pl-s"><span class="pl-pds">'</span>yaml<span class="pl-pds">'</span></span>)<span class="pl-k">-&gt;</span>withHeaders();</span></pre></div>

<h3>
<a id="ini-deserializer" class="anchor" href="#ini-deserializer" aria-hidden="true"><span class="octicon octicon-link"></span></a>INI Deserializer</h3>

<p>Uses INI parser by <a href="https://github.com/austinhyde" class="user-mention">@austinhyde</a></p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$array</span> <span class="pl-k">=</span> <span class="pl-c1">array</span>(</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>d<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>b<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">array</span>(<span class="pl-s"><span class="pl-pds">'</span>test<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>c<span class="pl-pds">'</span></span>),</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>database<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">array</span>(</span>
<span class="pl-s1">        <span class="pl-s"><span class="pl-pds">'</span>default<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">array</span>(</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>db<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>host<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>master.db<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>ip<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>dd<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">        )</span>
<span class="pl-s1">    ),</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>array<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">array</span>(<span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>1<span class="pl-pds">'</span></span>, <span class="pl-c1">3</span>),</span>
<span class="pl-s1">);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$encode</span> <span class="pl-k">=</span> <span class="pl-c1">Serializers\</span><span class="pl-c1">Encode</span><span class="pl-k">::</span>toIni(<span class="pl-smi">$array</span>);</span>
<span class="pl-s1"><span class="pl-smi">$encode</span><span class="pl-k">-&gt;</span>toFile(<span class="pl-s"><span class="pl-pds">'</span>config.ini<span class="pl-pds">'</span></span>);</span></pre></div>

<h3>
<a id="ini-serializer" class="anchor" href="#ini-serializer" aria-hidden="true"><span class="octicon octicon-link"></span></a>INI Serializer</h3>

<p>The functionality is limited to basic INI formats, e.g. no support for inheritance. As I can't see a good use case at the moment, this class is here only for keeping a complete stack of encoders/decoders together</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$ini</span> <span class="pl-k">=</span> <span class="pl-c1">Serializers\</span><span class="pl-c1">Encode</span><span class="pl-k">::</span>toIni(<span class="pl-smi">$array</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c1">print_r</span>(<span class="pl-smi">$ini</span><span class="pl-k">-&gt;</span>load());</span></pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/realshadow/serializers">Serializers</a> is maintained by <a href="https://github.com/realshadow">realshadow</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
